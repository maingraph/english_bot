[build]
  command = "echo 'No build needed'"
  publish = "public"

[build.environment]
  PYTHON_VERSION = "3.11"

# Ensure bundled serverless functions have access to static assets they read at runtime.
# Without this, `public/vocab.json` may not be present in the function filesystem on Netlify.
[functions]
  directory = "netlify/functions"
  included_files = ["public/vocab.json"]

# API routes to Netlify Function (preserve path for routing)
[[redirects]]
  from = "/api/*"
  to = "/.netlify/functions/tma-api/:splat"
  status = 200

# All other routes to index.html (SPA)
[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200

